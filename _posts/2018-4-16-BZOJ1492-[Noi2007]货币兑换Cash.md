---
layout: post
title: BZOJ1492 [NOI2007]货币兑换Cash
date: 2018-04-16 19:04:11 +0800
categories: training
tags: DP 斜率优化 数据结构 cdq分治
img: https://vexoben.github.io/assets/images/Blog/2018-4-16-BZOJ1492-[Noi2007]货币兑换Cash
---

题目链接：[https://www.lydsy.com/JudgeOnline/problem.php?id=1492][1]

## **题解**

首先应该显然的贪心：每次买入就花完所有的钱，卖出就卖完所有的券。

自然就得到一个O(n^2)的DP：令f[i]为前i天的最大收益，x[i]为第i天所有钱买入股票后A股最大持有数，y[i]为B股持有数。

那么就有：

![][2]

暴力O(n)转移就是O(n^2)了。

考虑用决策单调性优化这个转移。对于两个状态j,k(f[j]<f[k]),k比j优当且仅当：



[1]:https://www.lydsy.com/JudgeOnline/problem.php?id=1492
[2]: https://vexoben.github.io/assets/images/Blog/2018-4-16-BZOJ1492-%5BNoi2007%5D%E8%B4%A7%E5%B8%81%E5%85%91%E6%8D%A2Cash%282%29.JPG